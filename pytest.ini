[pytest]
testpaths = tests
pythonpath = src
addopts = 
    --ignore=scripts/monitoring
    --ignore=examples
    -m "not integration and not slow and not packaging and not hanging and not dashboard"
# Random-order test hardening: Use --randomly-seed=<seed> to reproduce failures
# Examples: pytest --randomly-seed=12345 or tox -e py312 -- --randomly-seed=12345
#
# Test Quarantine:
# - hanging: Tests that hang in full suite (excluded from CI - run separately)
# - dashboard: Dashboard self-tests (excluded from CI - run separately)
# These tests can be run explicitly with: pytest -m hanging or pytest -m dashboard
# Or via tox: tox -e hanging or tox -e dashboard
norecursedirs = scripts *.egg .git CVS _darcs {arch} *.egg-info examples .pytest_cache
filterwarnings = 
    ignore::DeprecationWarning:tests.test_enhanced_setup
    ignore::pydantic.PydanticDeprecatedSince20:ai_utilities.knowledge.models
    ignore::pydantic.PydanticDeprecatedSince20
    # Environment-dependent SSL warnings (LibreSSL/OpenSSL compatibility)
    ignore::urllib3.exceptions.NotOpenSSLWarning
    ignore::ai_utilities.ssl_check.SSLBackendCompatibilityWarning
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests that require real network/API calls
    network: marks tests that require network connectivity
    openai: marks tests that require OpenAI API access
    groq: marks tests that require Groq API access
    together: marks tests that require Together AI API access
    openrouter: marks tests that require OpenRouter API access
    ollama: marks tests that require Ollama server
    lmstudio: marks tests that require LM Studio server
    text_generation_webui: marks tests that require text-generation-webui server
    fastchat: marks tests that require FastChat server
    hanging: marks tests that hang in full suite (excluded from CI - run separately)
    dashboard: marks tests related to dashboard functionality (excluded from CI - run separately)
    optional_dep: marks tests that require optional dependencies
    packaging: marks tests that validate packaging and distribution
