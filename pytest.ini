[pytest]
testpaths = tests
pythonpath = src
addopts = 
    --timeout=300 
    --timeout-method=thread 
    --ignore=scripts/monitoring
    --ignore=examples
    --randomly-seed=last
    -m "not integration and not slow and not packaging and not hanging and not dashboard"
# Random-order test hardening: Use --randomly-seed=<seed> to reproduce failures
# Examples: pytest --randomly-seed=12345 or tox -e py312 -- --randomly-seed=12345
norecursedirs = scripts *.egg .git CVS _darcs {arch} *.egg-info examples
filterwarnings = 
    ignore::DeprecationWarning:tests.test_enhanced_setup
    ignore::pydantic.PydanticDeprecatedSince20:ai_utilities.knowledge.models
    ignore::pydantic.PydanticDeprecatedSince20
    # Environment-dependent SSL warnings (LibreSSL/OpenSSL compatibility)
    ignore::urllib3.exceptions.NotOpenSSLWarning
    ignore::ai_utilities.ssl_check.SSLBackendCompatibilityWarning
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests that require real network/API calls
    network: marks tests that require network connectivity
    openai: marks tests that require OpenAI API access
    groq: marks tests that require Groq API access
    together: marks tests that require Together AI API access
    openrouter: marks tests that require OpenRouter API access
    ollama: marks tests that require Ollama server
    lmstudio: marks tests that require LM Studio server
    text_generation_webui: marks tests that require text-generation-webui server
    fastchat: marks tests that require FastChat server
    hanging: marks tests that hang in full suite (should be run separately)
    dashboard: marks tests related to dashboard functionality
    optional_dep: marks tests that require optional dependencies
    packaging: marks tests that validate packaging and distribution
